import { ipcRenderer } from 'electron';
import { useEffect, useState } from 'react';
export function useSetting(name, initialValue) {
    const [value, setValue] = useState(initialValue);
    useEffect(() => {
        ipcRenderer.once('get-setting', handleSettingResponse);
        ipcRenderer.send('get-setting', name);
        return function cleanup() {
            ipcRenderer.removeListener('get-setting', handleSettingResponse);
        };
    }, []);
    function handleSettingResponse(evt, receivedSettingName, value) {
        if (name === receivedSettingName) {
            setValue(value);
        }
    }
    async function commit() {
        await ipcRenderer.send('set-setting', name, value);
    }
    return {
        value: value,
        set: setValue,
        commit: commit,
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVuZGVyZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvc2V0dGluZ3MvcmVuZGVyZXIudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxVQUFVLENBQUM7QUFDdkMsT0FBTyxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsTUFBTSxPQUFPLENBQUM7QUFHNUMsTUFBTSxVQUFVLFVBQVUsQ0FBSSxJQUFZLEVBQUUsWUFBZTtJQUN6RCxNQUFNLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxZQUFZLENBQUMsQ0FBQztJQUVqRCxTQUFTLENBQUMsR0FBRyxFQUFFO1FBQ2IsV0FBVyxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUUscUJBQXFCLENBQUMsQ0FBQztRQUN2RCxXQUFXLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxJQUFJLENBQUMsQ0FBQztRQUN0QyxPQUFPLFNBQVMsT0FBTztZQUNyQixXQUFXLENBQUMsY0FBYyxDQUFDLGFBQWEsRUFBRSxxQkFBcUIsQ0FBQyxDQUFDO1FBQ25FLENBQUMsQ0FBQTtJQUNILENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUVQLFNBQVMscUJBQXFCLENBQUMsR0FBUSxFQUFFLG1CQUEyQixFQUFFLEtBQVU7UUFDOUUsSUFBSSxJQUFJLEtBQUssbUJBQW1CLEVBQUU7WUFDaEMsUUFBUSxDQUFDLEtBQVUsQ0FBQyxDQUFDO1NBQ3RCO0lBQ0gsQ0FBQztJQUVELEtBQUssVUFBVSxNQUFNO1FBQ25CLE1BQU0sV0FBVyxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUUsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQ3JELENBQUM7SUFFRCxPQUFPO1FBQ0wsS0FBSyxFQUFFLEtBQUs7UUFDWixHQUFHLEVBQUUsUUFBUTtRQUNiLE1BQU0sRUFBRSxNQUFNO0tBQ2YsQ0FBQztBQUNKLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpcGNSZW5kZXJlciB9IGZyb20gJ2VsZWN0cm9uJztcbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZVNldHRpbmc8VD4obmFtZTogc3RyaW5nLCBpbml0aWFsVmFsdWU6IFQpIHtcbiAgY29uc3QgW3ZhbHVlLCBzZXRWYWx1ZV0gPSB1c2VTdGF0ZShpbml0aWFsVmFsdWUpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaXBjUmVuZGVyZXIub25jZSgnZ2V0LXNldHRpbmcnLCBoYW5kbGVTZXR0aW5nUmVzcG9uc2UpO1xuICAgIGlwY1JlbmRlcmVyLnNlbmQoJ2dldC1zZXR0aW5nJywgbmFtZSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGNsZWFudXAoKSB7XG4gICAgICBpcGNSZW5kZXJlci5yZW1vdmVMaXN0ZW5lcignZ2V0LXNldHRpbmcnLCBoYW5kbGVTZXR0aW5nUmVzcG9uc2UpO1xuICAgIH1cbiAgfSwgW10pO1xuXG4gIGZ1bmN0aW9uIGhhbmRsZVNldHRpbmdSZXNwb25zZShldnQ6IGFueSwgcmVjZWl2ZWRTZXR0aW5nTmFtZTogc3RyaW5nLCB2YWx1ZTogYW55KSB7XG4gICAgaWYgKG5hbWUgPT09IHJlY2VpdmVkU2V0dGluZ05hbWUpIHtcbiAgICAgIHNldFZhbHVlKHZhbHVlIGFzIFQpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGZ1bmN0aW9uIGNvbW1pdCgpIHtcbiAgICBhd2FpdCBpcGNSZW5kZXJlci5zZW5kKCdzZXQtc2V0dGluZycsIG5hbWUsIHZhbHVlKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgdmFsdWU6IHZhbHVlLFxuICAgIHNldDogc2V0VmFsdWUsXG4gICAgY29tbWl0OiBjb21taXQsXG4gIH07XG59XG4iXX0=