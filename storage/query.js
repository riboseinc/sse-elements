export class QuerySet {
    constructor(index, order = sortAlphabeticallyAscending, items = undefined, ordered = false) {
        this.index = index;
        this.items = items === undefined ? Object.entries(index) : items;
        this.order = order;
        this._ordered = ordered;
    }
    get(id) {
        return this.index[id];
    }
    add(obj) {
        this.index[obj.id] = obj;
    }
    orderBy(comparison) {
        return new QuerySet(this.index, this.order, [...this.items].sort(comparison), true);
    }
    filter(func) {
        return new QuerySet(this.index, this.order, this.items.filter(func), this._ordered);
    }
    all() {
        return this._ordered
            ? this.items.map(item => item[1])
            : this.orderBy(this.order).items.map(item => item[1]);
    }
}
export const sortAlphabeticallyAscending = function (a, b) {
    return a[0].localeCompare(b[0]);
};
export const sortIntegerDescending = function (a, b) {
    return parseInt(b[0], 10) - parseInt(a[0], 10);
};
export const sortIntegerAscending = function (a, b) {
    return parseInt(a[0], 10) - parseInt(b[0], 10);
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicXVlcnkuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvc3RvcmFnZS9xdWVyeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUEyQkEsTUFBTSxPQUFPLFFBQVE7SUFRbkIsWUFDSSxLQUFlLEVBQ2YsUUFBcUIsMkJBQTJCLEVBQ2hELFFBQW1DLFNBQVMsRUFDNUMsT0FBTyxHQUFHLEtBQUs7UUFDakIsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7UUFDbkIsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUM7UUFDakUsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7UUFDbkIsSUFBSSxDQUFDLFFBQVEsR0FBRyxPQUFPLENBQUM7SUFDMUIsQ0FBQztJQUNELEdBQUcsQ0FBQyxFQUFVO1FBQ1osT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ3hCLENBQUM7SUFDRCxHQUFHLENBQUMsR0FBTTtRQUNSLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEdBQUcsQ0FBQztJQUMzQixDQUFDO0lBQ0QsT0FBTyxDQUFDLFVBQXVCO1FBQzdCLE9BQU8sSUFBSSxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ3RGLENBQUM7SUFDRCxNQUFNLENBQUMsSUFBb0M7UUFDekMsT0FBTyxJQUFJLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ3RGLENBQUM7SUFDRCxHQUFHO1FBQ0QsT0FBTyxJQUFJLENBQUMsUUFBUTtZQUNsQixDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDakMsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUMxRCxDQUFDO0NBQ0Y7QUFJRCxNQUFNLENBQUMsTUFBTSwyQkFBMkIsR0FBZ0IsVUFBVSxDQUFDLEVBQUUsQ0FBQztJQUNwRSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbEMsQ0FBQyxDQUFBO0FBQ0QsTUFBTSxDQUFDLE1BQU0scUJBQXFCLEdBQWdCLFVBQVUsQ0FBb0IsRUFBRSxDQUFvQjtJQUNwRyxPQUFPLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEdBQUcsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUNqRCxDQUFDLENBQUE7QUFDRCxNQUFNLENBQUMsTUFBTSxvQkFBb0IsR0FBZ0IsVUFBVSxDQUFvQixFQUFFLENBQW9CO0lBQ25HLE9BQU8sUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBQ2pELENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBpbnRlcmZhY2UgSW5kZXhhYmxlT2JqZWN0PElEVHlwZSA9IGFueT4ge1xuICAvKiBBbiBpbmRleGFibGUgb2JqZWN0IGlzIGFuIG9iamVjdCB0aGF0IGhhcyBhdCBsZWFzdCBhbiBgaWRgIHByb3BlcnR5XG4gICAgIGFsb25nc2lkZSB3aGF0ZXZlciBlbHNlIGZpZWxkcyBkZXNjcmliZSB0aGF0IG9iamVjdC5cblxuICAgICBNYXkgYmUgbW9yZSBhcHByb3ByaWF0ZWx5IG5hbWVkIENvbnRlbnRUeXBlLiAqL1xuXG4gIGlkOiBJRFR5cGUsXG4gIFtmaWVsZE1hbWU6IHN0cmluZ106IGFueSxcbn1cblxuXG5leHBvcnQgaW50ZXJmYWNlIEluZGV4PFQgZXh0ZW5kcyBJbmRleGFibGVPYmplY3Q8YW55Pj4ge1xuICAvKiBBbiBpbmRleCBpcyBhIHNpbXBsZSBvYmplY3RcbiAgICAgd2hlcmUgZWFjaCBrZXkgaXMgYSBzdHJpbmdpZmllZCB2YWx1ZSBvZiBzb21lIHByb3BlcnR5IG9mIG9iamVjdCBULFxuICAgICBhbmQgdGhlIHZhbHVlIGlzIGFzc2lnbmVkIHRoZSBjb3JyZXNwb25kaW5nIG9iamVjdCBpbnN0YW5jZVxuICAgICBmb3IgZGlyZWN0IGFjY2Vzcy5cblxuICAgICBUaGUgcHJvcGVydHkgaW4gcXVlc3Rpb24gbXVzdCBvYnZpb3VzbHkgbm90IGhhdmUgZHVwbGljYXRlIHZhbHVlc1xuICAgICBhY3Jvc3MgYWxsIG9iamVjdHMuICovXG5cbiAgW3N0cmluZ2lmaWVkRmllbGRWYWx1ZTogc3RyaW5nXTogVCxcbn1cblxuXG5pbnRlcmZhY2UgQXJyYXlTb3J0ZXIgeyAoYTogW3N0cmluZywgdW5rbm93bl0sIGI6IFtzdHJpbmcsIHVua25vd25dKTogbnVtYmVyIH1cblxuXG5leHBvcnQgY2xhc3MgUXVlcnlTZXQ8VCBleHRlbmRzIEluZGV4YWJsZU9iamVjdD4ge1xuICAvKiBTaW1wbGlmaWVzIHNvbWUgb3BlcmF0aW9ucyBvbiBpbmRleGVzLCBsaWtlIGEgbWluaS1wc2V1ZG8tT1JNLiAqL1xuXG4gIGluZGV4OiBJbmRleDxUPjtcbiAgb3JkZXI6IEFycmF5U29ydGVyO1xuICBpdGVtczogW3N0cmluZywgVF1bXTtcbiAgX29yZGVyZWQ6IGJvb2xlYW47XG5cbiAgY29uc3RydWN0b3IoXG4gICAgICBpbmRleDogSW5kZXg8VD4sXG4gICAgICBvcmRlcjogQXJyYXlTb3J0ZXIgPSBzb3J0QWxwaGFiZXRpY2FsbHlBc2NlbmRpbmcsXG4gICAgICBpdGVtczogW3N0cmluZywgVF1bXSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZCxcbiAgICAgIG9yZGVyZWQgPSBmYWxzZSkge1xuICAgIHRoaXMuaW5kZXggPSBpbmRleDtcbiAgICB0aGlzLml0ZW1zID0gaXRlbXMgPT09IHVuZGVmaW5lZCA/IE9iamVjdC5lbnRyaWVzKGluZGV4KSA6IGl0ZW1zO1xuICAgIHRoaXMub3JkZXIgPSBvcmRlcjtcbiAgICB0aGlzLl9vcmRlcmVkID0gb3JkZXJlZDtcbiAgfVxuICBnZXQoaWQ6IHN0cmluZyk6IFQge1xuICAgIHJldHVybiB0aGlzLmluZGV4W2lkXTtcbiAgfVxuICBhZGQob2JqOiBUKTogdm9pZCB7XG4gICAgdGhpcy5pbmRleFtvYmouaWRdID0gb2JqO1xuICB9XG4gIG9yZGVyQnkoY29tcGFyaXNvbjogQXJyYXlTb3J0ZXIpIHtcbiAgICByZXR1cm4gbmV3IFF1ZXJ5U2V0KHRoaXMuaW5kZXgsIHRoaXMub3JkZXIsIFsuLi50aGlzLml0ZW1zXS5zb3J0KGNvbXBhcmlzb24pLCB0cnVlKTtcbiAgfVxuICBmaWx0ZXIoZnVuYzogKGl0ZW06IFtzdHJpbmcsIFRdKSA9PiBib29sZWFuKSB7XG4gICAgcmV0dXJuIG5ldyBRdWVyeVNldCh0aGlzLmluZGV4LCB0aGlzLm9yZGVyLCB0aGlzLml0ZW1zLmZpbHRlcihmdW5jKSwgdGhpcy5fb3JkZXJlZCk7XG4gIH1cbiAgYWxsKCkge1xuICAgIHJldHVybiB0aGlzLl9vcmRlcmVkXG4gICAgICA/IHRoaXMuaXRlbXMubWFwKGl0ZW0gPT4gaXRlbVsxXSlcbiAgICAgIDogdGhpcy5vcmRlckJ5KHRoaXMub3JkZXIpLml0ZW1zLm1hcChpdGVtID0+IGl0ZW1bMV0pO1xuICB9XG59XG5cblxuXG5leHBvcnQgY29uc3Qgc29ydEFscGhhYmV0aWNhbGx5QXNjZW5kaW5nOiBBcnJheVNvcnRlciA9IGZ1bmN0aW9uIChhLCBiKSB7XG4gIHJldHVybiBhWzBdLmxvY2FsZUNvbXBhcmUoYlswXSk7XG59XG5leHBvcnQgY29uc3Qgc29ydEludGVnZXJEZXNjZW5kaW5nOiBBcnJheVNvcnRlciA9IGZ1bmN0aW9uIChhOiBbc3RyaW5nLCB1bmtub3duXSwgYjogW3N0cmluZywgdW5rbm93bl0pOiBudW1iZXIge1xuICByZXR1cm4gcGFyc2VJbnQoYlswXSwgMTApIC0gcGFyc2VJbnQoYVswXSwgMTApO1xufVxuZXhwb3J0IGNvbnN0IHNvcnRJbnRlZ2VyQXNjZW5kaW5nOiBBcnJheVNvcnRlciA9IGZ1bmN0aW9uIChhOiBbc3RyaW5nLCB1bmtub3duXSwgYjogW3N0cmluZywgdW5rbm93bl0pOiBudW1iZXIge1xuICByZXR1cm4gcGFyc2VJbnQoYVswXSwgMTApIC0gcGFyc2VJbnQoYlswXSwgMTApO1xufVxuIl19